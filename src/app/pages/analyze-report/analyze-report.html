<div class="report-container">
  <header class="report-header">
    <img
      src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/NASA_logo.svg/2560px-NASA_logo.svg.png"
      alt="NASA Logo"
      class="nasa-logo"
    />
    <h1>ğŸ“Š Informe de AnÃ¡lisis Ambiental</h1>
    <p class="subtitle">Generado con datos satelitales y abiertos (NASA, OSM, WorldPop)</p>
  </header>

  <div *ngIf="data; else noData">
    <!-- ğŸŒ SECCIÃ“N UBICACIÃ“N -->
    <section class="report-section">
      <h2>ğŸŒ UbicaciÃ³n</h2>
      <div class="info-grid">
        <p><strong>Latitud:</strong> {{ data.location.lat }}</p>
        <p><strong>Longitud:</strong> {{ data.location.lon }}</p>
        <p><strong>PaÃ­s (ISO3):</strong> {{ data.location.iso3 }}</p>
      </div>
    </section>

    <!-- ğŸ‘¥ SECCIÃ“N POBLACIÃ“N -->
    <section class="report-section">
      <h2>ğŸ‘¥ PoblaciÃ³n</h2>
      <p><strong>{{ data.population.title }}</strong></p>
      <p>{{ data.population.desc }}</p>

      <div class="img-wrapper" *ngIf="data.population.url_img">
        <img [src]="data.population.url_img" alt="Mapa de poblaciÃ³n" />
        <p class="img-caption">ğŸ—ºï¸ DistribuciÃ³n poblacional (WorldPop 2020)</p>
      </div>

      <p>
        <strong>Fuente:</strong>
        <a [href]="data.population.url_summary" target="_blank">
          WorldPop, University of Southampton
        </a>
      </p>
    </section>

    <!-- ğŸŒ¦ï¸ SECCIÃ“N CLIMA -->
    <section class="report-section">
      <h2>ğŸŒ¦ï¸ Clima (NASA POWER)</h2>
      <div *ngIf="getClimateSummary() as clima">
        <p><strong>ğŸŒ¡ï¸ Temperatura promedio:</strong> {{ clima.avgTemp }} Â°C</p>
        <p><strong>ğŸ’§ PrecipitaciÃ³n promedio:</strong> {{ clima.avgPrec }} mm/dÃ­a</p>
      </div>
      <p class="note">
        Datos procesados desde la API de NASA POWER para los Ãºltimos 7 dÃ­as.
      </p>
    </section>

    <!-- ğŸ’§ SECCIÃ“N AGUA -->
    <section class="report-section">
      <h2>ğŸ’§ Cuerpos de Agua Cercanos</h2>
      <p>
        Se identificaron
        <strong>{{ data.water.count || 0 }}</strong> cuerpos de agua
        dentro de un radio de 5 km.
      </p>
      <p class="note">Datos obtenidos de OpenStreetMap (Overpass API)</p>
    </section>

    <!-- ğŸ›°ï¸ SECCIÃ“N IMAGEN SATELITAL -->
    <section class="report-section">
      <h2>ğŸ›°ï¸ Imagen Satelital</h2>
      <div class="img-wrapper">
        <img [src]="data.gibs.imageUrl" alt="Imagen satelital NASA GIBS" />
        <p class="img-caption">ğŸŒ Imagen satelital NASA GIBS (MODIS TrueColor)</p>
      </div>
    </section>

    <!-- ğŸ”— ENLACES -->
    <section class="report-section links">
      <h2>ğŸ”— Fuentes de Datos</h2>
      <ul>
        <li><a href="https://power.larc.nasa.gov/" target="_blank">NASA POWER</a></li>
        <li><a href="https://gibs.earthdata.nasa.gov/" target="_blank">NASA GIBS</a></li>
        <li><a href="https://hub.worldpop.org/" target="_blank">WorldPop</a></li>
        <li><a href="https://www.openstreetmap.org/" target="_blank">OpenStreetMap</a></li>
      </ul>
    </section>

    <!-- ğŸ”™ BOTÃ“N VOLVER -->
    <div class="back-btn">
      <button routerLink="/map">â¬…ï¸ Volver al mapa</button>
    </div>
  </div>

  <ng-template #noData>
    <p class="no-data">âš ï¸ No hay datos cargados. Regresa al mapa e inicia un nuevo anÃ¡lisis.</p>
  </ng-template>
</div>
